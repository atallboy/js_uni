(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/master/console"],{"1a15":function(t,e,n){"use strict";var o=n("b144"),a=n.n(o);a.a},"1a4a":function(t,e,n){"use strict";(function(t,e){var o=n("47a9");n("70ab");o(n("3240"));var a=o(n("ed4f"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},3584:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return o}));var o={yjNavBar:function(){return n.e("components/yj-nav-bar/yj-nav-bar").then(n.bind(null,"4426"))},uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"5bd9"))}},a=function(){var t=this.$createElement;this._self._c},c=[]},5137:function(t,e,n){"use strict";(function(t){var o=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(n("7eb4")),c=o(n("ee10")),i=n("e503"),s={data:function(){return{locationName:"",jindu:"",weidu:"",agent_cate:"",user:{},master:{}}},onLoad:function(e){this.agent_cate=t.getStorageSync("agent_cate")},onShow:function(){this.userInfo(),this.masterDetail(),t.getStorageSync("islocation")?(console.log("show里面开启定位之前"),this.startadress(),console.log("打印了缓存里面的islocation信息",t.getStorageSync("islocation")),this.islocation=t.getStorageSync("islocation")):this.islocation=t.getStorageSync("islocation")},methods:{switchchange:function(e){e.detail.value?(this.startadress(),this.islocation=e.detail.value,t.setStorageSync("islocation",e.detail.value)):(this.islocation=e.detail.value,t.setStorageSync("islocation",e.detail.value))},ssdwdesc:function(){t.showModal({title:"实时定位",content:"因频繁解析位置信息会导致过度使用第三方地图接口，若您一直停留在本页面，则需要手动刷新页面才能显示最新的实时地址。",showCancel:!1,confirmText:"知道了"})},dwbzdesc:function(){t.showModal({title:"定位失败或不准确",content:"因诸多原因影响 (例如:网速低、信号差、拒绝授权定位等)，可能导致您的定位失败或不准确。当您发现时，可以尝试通过以下操作来重新定位:",showCancel:!1,confirmText:"知道了"})},startadress:function(){var e=this;console.log("点击了获取位置"),t.getLocation({type:"wgs84",accuracy:"best",isHighAccuracy:!0,success:function(t){console.log("正确位置返回",t);var n=t.longitude,o=t.latitude;e.jindu=t.longitude,e.weidu=t.latitude,console.log("经度",e.jindu),console.log("纬度",e.weidu),e.reverseGeocoding(n,o);(0,i.jishiaddress)({id:e.master.id,jindu:t.longitude,weidu:t.latitude,locationName:e.locationName})},fail:function(e){console.log("获取定位失败的",e),t.showToast({title:"获取位置失败，请重试",icon:"error"})},complete:function(t){console.log("获取定位成功与否都返回",t)}})},reverseGeocoding:function(e,n){var o=this,a="https://restapi.amap.com/v3/geocode/regeo?key=".concat("59c50aaacccbb076a1b6f79192570255","&location=").concat(e,",").concat(n,"&output=json");fetch(a).then((function(t){return t.json()})).then((function(e){"1"===e.status&&e.regeocode?(o.locationName=e.regeocode.formatted_address,console.log("打印转码后的地址",o.locationName),t.showToast({title:"获取位置成功"})):console.error("逆地理编码失败：",e.info)})).catch((function(t){console.error("逆地理编码失败：",t)}))},changeOpenStatus:function(){var t=this;return(0,c.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.changeMasterOpenStatus)();case 2:e.sent,t.masterDetail();case 4:case"end":return e.stop()}}),e)})))()},masterDetail:function(){var t=this;return(0,c.default)(a.default.mark((function e(){var n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.masterDetail)();case 2:n=e.sent,t.master=n.data.data,console.log(t.master.id),console.log("技师信息详情",t.master);case 6:case"end":return e.stop()}}),e)})))()},userInfo:function(){var t=this;return(0,c.default)(a.default.mark((function e(){var n;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,i.getUserInfo)();case 2:n=e.sent,t.user=n.data.data,console.log("用户信息",t.user);case 5:case"end":return e.stop()}}),e)})))()},toWhere:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;1==n&&t.navigateTo({url:e}),2==n&&t.redirectTo({url:e}),3==n&&t.switchTab({url:e})}}};e.default=s}).call(this,n("df3c")["default"])},b144:function(t,e,n){},d5d9:function(t,e,n){"use strict";n.r(e);var o=n("5137"),a=n.n(o);for(var c in o)["default"].indexOf(c)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(c);e["default"]=a.a},ed4f:function(t,e,n){"use strict";n.r(e);var o=n("3584"),a=n("d5d9");for(var c in a)["default"].indexOf(c)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(c);n("1a15");var i=n("828b"),s=Object(i["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=s.exports}},[["1a4a","common/runtime","common/vendor"]]]);